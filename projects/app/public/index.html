<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="js/jquery_1.12.4.min.js"></script>
	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
			list-style: none;
		}
		[v-cloak]{
			display: none;
		}
		.box{
			width: 1200px;
			margin: 0 auto;
		}
		.logincont{
			width: 1200px;
			margin: 0 auto;
		}
		.login{
			border:1px solid #000;
			background-color: #ccc;
			padding:30px;
			margin-top: 20px;
		}
		.cont_box{
			padding-top: 20px;
		}
		.ipt_box{
			margin-bottom: 20px;
		}
		.btn_box{
			text-align: center;
			margin-top: 40px;
		}
		.btn_box button{
			width: 140px;
			height: 60px;
			font-size: 24px;
		}
		.circle{
			width: 100px;
			height: 100px;
			border-radius: 50%;
			border:1px solid #000;
			margin-left: 35%;
			margin-bottom: 20px;
		}
		.img_ipt{
			margin-bottom: 20px;
		}
		#imgbox {
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			background-size: cover;
		}
		.file-box {
			display: inline-block;
			position: relative;
			width:100px;
			height:100px;
			border-radius: 50%;
			margin-left: 35%;
			margin-bottom: 20px;
			overflow: hidden;
			color: #000;
			background-color: #fff;
			line-height:100px;
			text-align: center;
			margin-top:5px;
		}
		.file-btn {
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			outline: none;
			background-color: transparent;
			filter: alpha(opacity=0);
			-moz-opacity: 0;
			-khtml-opacity: 0;
			opacity: 0;
			line-height:50px;
			text-align: center;
			z-index: 9;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="loginBox">
			<div class="row logincont">
				<div class="col-md-4 col-md-offset-8 login">
					<div>
					  <ul class="nav nav-tabs" role="tablist">
					    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">注册</a></li>
					    <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">登录</a></li>
					  </ul>
					  <div class="tab-content cont_box">
					    <div role="tabpanel" class="tab-pane active" id="home">
					    	<div class="img_box">
							    <div class="file-box">
								    <label for="photo">头像</label>
								    <input type="file" name="photo" id="files" class="file-btn" @change="file_btn">
								    <div id="imgbox"></div>
							    </div>
					    	</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">账号：</span>
								<input type="text" class="form-control" placeholder="IDnumber" aria-describedby="basic-addon1" v-model="val1.id">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">密码：</span>
								<input type="text" class="form-control" placeholder="Password" aria-describedby="basic-addon1" v-model="val1.pass">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">昵称：</span>
								<input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1" v-model="val1.username">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">电话：</span>
								<input type="text" class="form-control" placeholder="tel" aria-describedby="basic-addon1" v-model="val1.tel">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">邮箱：</span>
								<input type="text" class="form-control" placeholder="Email" aria-describedby="basic-addon1" v-model="val1.emali">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">地址：</span>
								<input type="text" class="form-control" placeholder="Address" aria-describedby="basic-addon1" v-model="val1.address">
							</div>
							<div class="btn_box"><button type="button" class="btn btn-success" @click="loginUp">注册</button></div>
					    </div>
					    <div role="tabpanel" class="tab-pane" id="profile">
					    	<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">账号：</span>
								<input type="text" class="form-control" placeholder="IDnumber" aria-describedby="basic-addon1" v-model="val2.id">
							</div>
							<div class="input-group ipt_box">
								<span class="input-group-addon" id="basic-addon1">密码：</span>
								<input type="text" class="form-control" placeholder="Password" aria-describedby="basic-addon1" v-model="val2.pass">
							</div>
							<div class="btn_box"><button type="button" class="btn btn-success" @click="loginIn">登录</button></div>
					    </div>
					  </div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript" src="js/vue-resource.js"></script>
<script type="text/javascript">
	new Vue({
		el:'.box',
		data:{
			val1:{
				id:"",
				pass:"",
				username:"",
				tel:"",
				emali:"",
				address:"",
				img_path:"",
			},
			val2:{
				id:"",
				pass:""
			},
		},
		methods:{
			file_btn(){
				var f = files.files[0]
				var d = new FormData
				d.append('img',f)
				var xhr=new XMLHttpRequest();
				xhr.open('post','http://localhost:8000/files/img',false);
				xhr.send(d);
				this.val1.img_path = xhr.response;
				imgbox.style.backgroundImage="url(file/"+xhr.response+")";
			},
			loginUp(){
				this.$http.post('http://localhost:8000/login/up',this.val1,{emulateJSON:true}).then((data)=>{
					// console.log(data.data);
					alert(data.data.type);
				})
				
			},
			loginIn(){
				this.$http.post('http://localhost:8000/login/in',this.val2,{emulateJSON:true}).then((data)=>{
					console.log(data.data);
					if(data.data.type=="登录成功"){ 
						localStorage.id=data.data.id;
						location.href="./index2.html";

					}else{
						alert(data.data.type);
					}
				})
			}
		}
	})
</script>
</html>